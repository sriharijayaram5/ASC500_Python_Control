<Experiment Name="AFM" ScreenX="10" ScreenY="1" >
  <Tab Name="AFM" Icon="scanner.xpm">

    <!-- Erste Zeile: Scanner Control, Feedback, Display, Display1, Display2 -->
    <Widget Type="Box"   Caption=""  Style="Flat"                          X="0" Y="0"    >  
        
        <!-- Erste Spalte Scanner Control -->
        <Widget Type="Constant" Address="0x1026" DefVal="20000" />
        <Widget Type="Constant" Address="0x1027" DefVal="20000" />
        
        <Widget Type="Box"   Caption="Scanner"                  X="0" Y="0" >
            <Widget Type="Box"   Caption=""                     X="0" Y="0" Style = "Flat" >
                <Widget Type="Box"   Caption=""                   X="0" Y="0" Style="Flat" Align="Left" Spacing="0" >
                    <Widget Type="Button" Icon="scanstop.xpm"         X="0" Y="0" Address="0x100" Toggle="0" Data="0"             Tip="Stop scanner" />
                    <Widget Type="Button" Icon="scanpause.xpm"        X="1" Y="0" Address="0x100" Toggle="1" Data="2" OffData="2" Tip="Pause Scanner" />
                    <Widget Type="Button" Icon="scanstart.xpm"        X="2" Y="0" Address="0x100" Toggle="1" Data="1"             Tip="Start Scanner" />
                    <Widget Type="Label" Caption="   "                X="3" Y="0" Width="1" />
                    <Widget Type="Led"   Caption=""                   X="4" Y="0" Width="1" Address="0x100" />
                </Widget>
                <Widget Type="Constant"                                                 Address="46" Index="0" DefVal="1" />
            </Widget>
            
            <Widget Type="Box"   Caption=""                     X="0" Y="1"   Style="Flat" >
                <Widget Type="Box"   Caption=""                     X="0" Y="0" Style="Flat" >
                    <Widget Type="Box"   Caption=""                     X="0" Y="0" Style="Flat" >
                        <Widget Type="Label" Caption="Scan Lines"         X="0" Y="0" Alignment="Left" />
                        <Widget Type="Edit"  Caption=""                   X="1" Y="0" Width="1" Address="29"   Min="10" Max="1000" DefVal="300"/>
                        <Widget Type="Label" Caption="Scan Columns"       X="2" Y="0" Alignment="Left" />
                        <Widget Type="Edit"  Caption=""                   X="3" Y="0" Width="1" Address="4099" Index="0" Min="10" Max="1024" />
                        <Widget Type="Label" Caption="Pixel Size [nm]"    X="0" Y="2" Alignment="Left" />
                        <Widget Type="Edit"  Caption=""                   X="1" Y="2" Address="4133" Display="Float" Min="0"  Scale="1000." />
                        <Widget Type="Label" Caption="Sample Time <b></b>[&mu;s]"        X="2" Y="2" Alignment="Left" />
                        <Widget Type="Edit"  Caption=""                   X="3" Y="2" Address="4128" Min="1"  Max="10000" />
                        <Widget Type="Label" Caption="Origin X [nm]"      X="0" Y="3" Alignment="Left" />
                        <Widget Type="Edit"  Caption=""                   X="1" Y="3" Address="4131" Display="Float" Scale="1000." />
                        <Widget Type="Label" Caption="Origin Y [nm]"      X="2" Y="3" Alignment="Left" />
                        <Widget Type="Edit"  Caption=""                   X="3" Y="3" Address="4132" Display="Float" Scale="1000." />
                        <Widget Type="Label" Caption="Rotation [deg]"     X="0" Y="4" Alignment="Left" />
                        <Widget Type="Edit"  Caption=""                   X="1" Y="4" Address="24"   Display="Float" Min="0"   Max="360" Scale="182.04444444444" />
                        <Widget Type="Check" Caption="Fix  X=Y"           X="3" Y="4"  Address="4102"  />
                    </Widget>
                    
                    <Widget Type="Box"   Caption="Resulting"     Style="Box"   X="0" Y="1"  >
                        <Widget Type="Label"  Caption="Range [nm]"        X="0" Y="0" Alignment="Left" />
                        <Widget Type="Label"  Caption="Freq.[Hz]"         X="0" Y="1" Alignment="Left" />
                        <Widget Type="Label"  Caption="X"                 X="1" Y="0" Address="4096" Alignment="Left" Display="Float" Scale="1000."  />
                        <Widget Type="Label"  Caption="Y"                 X="2" Y="0" Address="4097" Alignment="Left" Display="Float" Scale="1000."  />
                        <Widget Type="Label"  Caption="Line"              X="1" Y="1" Address="4101" Alignment="Left" Display="Float" Scale="1000."  />
                        <Widget Type="Label"  Caption="Frame"             X="2" Y="1" Address="4103" Alignment="Left" Display="Float" Scale="10000." />
                        <Widget Type="Label"  Caption="Speed [nm/s]"      X="0" Y="2" Address="4098" Alignment="Left" Width="2" Display="Float" Scale="1000." />
                    </Widget>
                </Widget>
               
                
                <Widget Type="Box"   Caption=""                   X="0" Y="2"  Style="Flat" >
                    <Widget Type="Box"   Caption=""               X="0" Y="0" Height="1"  Style="Flat" >
                        <Widget Type="Constant"                                 Address="48" Index="0" DefVal="1" />
                        <Widget Type="Combo"   Caption="Signal"     X="0" Y="0" Address="49" Index="0" Choices="ADC1:ADC2:ADC3:ADC4:ADC5:ADC6:Readback AD:Counter1:Counter2:Readback Z:Readback X:Readback Y:Slave1=12:Slave2=13:ADC1/Z-OUT=14" DefVal="0" />
                        <Widget Type="Combo"   Caption="Average"    X="2" Y="0" Address="51" Index="0"  Choices="1:2:4:8:16:32:64:128" DefVal="0" />
                    </Widget>
                    
                    <Widget Type="Tabs"                               X="0" Y="2" Height="8" >
                        <Tab Name="Frame View" Margin="0" >
                          <View Channel="0"    Caption=""               X="0" Y="0" >
                            <Plugin Type="Disc Writer"/>
                            <Plugin Type="Scan Direction Filter"/>
                            <Plugin Type="Underground Filter"/>
                            <Plugin Type="Frame Display"/>
                          </View>
                        </Tab>
                        <Tab Name="Line View" Margin="0" >
                          <View Channel="0"    Caption=""               X="0" Y="0" >
                            <Plugin Type="Disc Writer"/>
                            <Plugin Type="Scan Direction Filter"/>
                            <Plugin Type="Underground Filter"/>
                            <Plugin Type="Line Display"/>
                          </View>
                        </Tab>
                    </Widget>
                </Widget>
            </Widget>
        </Widget>
        
        <!-- rechts -->
        <Widget Type="Box"   Caption=""              Style="Flat"       X="3" Y="0" >
        
            <!-- rechts oben -->
            <Widget Type="Box"   Caption=""    Style="Flat"                 X="0" Y="0" >
                
                <!-- Feedback -->
                <Widget Type="Box"   Caption="Feedback"                 X="0" Y="0" Width="1" >
                    <Widget Type="Box"   Caption=""                     X="3" Y="0" Width="2" Height = "1" Style="Flat">
                      <Widget Type="Check" Caption="Loop On"            X="0" Y="0"  Address="96"  />
                      <Widget Type="Led"                                X="1" Y="0"  Address="96"  />
                      <Widget Type="Button" Caption="Retract"           X="0" Y="1" Width="2"   Address="113" />
                    </Widget>
                    
                    <Widget Type="Box"   Caption=""                       X="3" Y="1"  Width="2" Height="8" Style="Flat" >
                      <Widget Type="Combo"  Caption="Actual Value"        X="0" Y="0" Action="Set" Choices="ADC1:ADC2:ADC3:ADC4:ADC5:ADC6:Readback AD:Counter1:Counter2:Readback Z:Readback X:Readback Y:Slave1:Slave2" Address="98" Index="0" />
                      <Widget Type="Edit"   Caption="Z Offset [V]"        X="0" Y="1"  Width="2" Address="105" Min="-10.0" Max="10.0" Display="Float" Scale="3276.7" />
                      <Widget Type="Edit"   Caption="kP 0..64"            X="0" Y="2"  Width="2" Address="101" Min="0"     Max="64"   Display="Float" Scale="1023.98"/>
                      <Widget Type="Edit"   Caption="kI 0..2000 [1/s]"    X="0" Y="3"  Width="2" Address="100" Min="0"     Max="2000" Display="Float" Scale="32.7675"/>
                      <Widget Type="Edit"   Caption=""                    X="0" Y="4"  Width="2" Address="0x7A"                       Display="Float" Scale="10000" >
                        <Widget Type="Label" Caption="Setpoint [%1]!mm:um:nm:pm:V:mV:uv:nV:Hz:mHz:uHz:nHz:s:ms:us:ns:A:mA:uA:nA:cos:dB=24" Display="Enum" Address="0x1051" Alignment="Left" />
                      </Widget>

                      <Widget Type="Combo"  Caption="Resolution [Bit]"    X="0" Y="5"  Width="2" Address="109" Choices="18:19:20:21:22:23:24:25:26:27:28" Offset="18" />
                      <Widget Type="Check"  Caption="Slope Comp. On"      X="0" Y="6"  Align="Bottom" Address="106"  />
                      <Widget Type="Edit"   Caption="Slope Comp. Z/X [%]" X="0" Y="7"  Width="2" Address="107"  Min="-20.0" Max="20.0" Display="Float" Scale="1638.35" />
                      <Widget Type="Edit"   Caption="Slope Comp. Z/Y [%]" X="0" Y="8"  Width="2" Address="108"  Min="-20.0" Max="20.0" Display="Float" Scale="1638.35" />
                    
                      
                      <Widget Type="ZMeter" Caption="Z"                 X="2" Y="0" Height="9" Scale="3276.8" BgColor="LightYellow" Color="LightBlue">
                        <Connect Name="ZPos"         Address="112"  />
                        <Connect Name="ZSoll"        Address="105" />
                        <Connect Name="ZResolution"  Address="4205" />
                      </Widget>
                    
                      <Widget Type="Constant" Address="98"   DefVal="9"  />      <!-- Actual Value = "Readback Z" -->
                      <Widget Type="Constant" Address="102"  DefVal="0"  />      <!-- Filter Algorithm = 0        -->
                      <Widget Type="Constant" Address="103"  DefVal="0"  />      <!-- Filter Parameter = 0        -->
                      <Widget Type="Constant" Address="106"  DefVal="0"  />      <!-- Slope Compensation off      -->
                      <Widget Type="Constant" Address="4104" DefVal="20" />      <!-- Z Polling Rate = 2 Hz       -->
                    </Widget>
                    
                </Widget>
                
                <Widget Type="Box"   Caption="Control"                     X="1" Y="0" Width="3" >
                
                    <Widget   Type="Box"      Caption=""                X="0" Y="0"  Style="Flat" >
                        <Widget Type="Tabs"                           <!--Width="2"-->    X="0" Y="0" >  
                            <Tab Name="Autoapproach" Margin="5" >
                                <Widget Type="Box"   Caption=""                       X="3" Y="11" Width="2" Height="1" Style="Flat" >
                                    <Widget Type="Radio" Caption="Autoapproach"         X="0" Y="0" Width="2" Address="0xA" Choices="Stop:Start" Orientation="Horizontal" />        
                                    <Widget Type="Led"   Caption="Run"                  X="0" Y="1" Width="1" Address="0xA" />
                                    <Widget Type="Led"   Caption="Detected"             X="1" Y="1" Width="1" Address="0xA"  />
                                    <Widget Type="Edit"  Caption="Threshold [nN]"       X="0" Y="2" Address="0xA" Index="0" Display="Float" Min="-100.0"   Max="100.0"  Scale="1310.71" />
                                    <Widget Type="Edit"  Caption="Speed [V/s]"          X="1" Y="2" Address="0xA" Index="0" Display="Float" Min="1.0"   Max="1000.0"  Scale="1" />
                                </Widget>
                            </Tab>
                            
                            <Tab Name="Measure Params" Margin="5" >
                                <Widget Type="Edit"   Caption="Amplitude Wait"     X="0" Y="0" Action="Set"  Address="0xE6" Index="0" Min="0" Max="65535"/>
                                <Widget Type="Edit"   Caption="Signal Wait"        X="0" Y="1" Action="Set"  Address="0xE7" Index="0" Min="0" Max="65535"/>
                                <Widget Type="Edit"   Caption="Spect. Wait"        X="0" Y="2" Action="Set"  Address="0xE8" Index="0" Min="0" Max="65535"/>
                                <Widget Type="Combo"  Caption="Datamux 1"          X="1" Y="0"               Address="0xE4" Index="0" Choices="Disable:Counter:Signal:Amplitude:SpecAmpl:SpecPhase:TDC:Period:Phase" DefVal="0" />
                                <Widget Type="Combo"  Caption="Datamux 2"          X="1" Y="1"               Address="0xE5" Index="0" Choices="Disable:Counter:Signal:Amplitude:SpecAmpl:SpecPhase:TDC:Period:Phase" DefVal="0" />
                                <Widget Type="Edit"   Caption="F In Sel."          X="1" Y="2" Action="Set"  Address="0xE9" Index="0" Min="0" Max="65535"/>
                            </Tab>
                            
                            <Tab Name="dPhi/dF Mode" Margin="5" >
                                <Widget Type="Box"   Caption=""                           X="0" Y="0"   Style="Flat"   >  
                                    <Widget Type="Check"    Caption="Active"              X="0" Y="0"               Address="0xA" Index="0" Align="VCenter"/>
                                    <Widget Type="Led"      Caption=""                    X="1" Y="0"               Address="0xA" Index="0" />
                                </Widget>
                                <Widget Type="Edit"     Caption="Span [Hz]         "  X="0" Y="1" Action="Set"  Address="0xA" Index="0" Display="Float" Scale="107.374" Min="0" Max="100"/>
                                <Widget Type="Edit"     Caption="Time <b></b>[&mu;s]" X="0" Y="2" Action="Set"  Address="0xA" Index="0" Min="1" Max="1000"/>
                                <Widget Type="Edit"     Caption="Steps"               X="0" Y="3" Action="Set"  Address="0xA" Index="0" Min="1" Max="1000"/>
                                <Widget Type="Label"    Caption=""                    X="0" Y="4"   />
                            </Tab>
                                
                            
                        </Widget>
                        
                        <!--
                        <Widget   Type="Box"      Caption="dPhi/dF Mode"                X="2" Y="0"  Style="Box" >
                            <Widget Type="Box"   Caption=""                           X="0" Y="0"   Style="Flat"   >  
                                <Widget Type="Check"    Caption="Active"              X="0" Y="0"               Address="0xA" Index="0" Align="VCenter"/>
                                <Widget Type="Led"      Caption=""                    X="1" Y="0"               Address="0xA" Index="0" />
                            </Widget>
                            <Widget Type="Edit"     Caption="Span [Hz]         "  X="0" Y="1" Action="Set"  Address="0xA" Index="0" Display="Float" Scale="107.374" Min="0" Max="100"/>
                            <Widget Type="Edit"     Caption="Time <b></b>[&mu;s]" X="0" Y="2" Action="Set"  Address="0xA" Index="0" Min="1" Max="1000"/>
                            <Widget Type="Edit"     Caption="Steps"               X="0" Y="3" Action="Set"  Address="0xA" Index="0" Min="1" Max="1000"/>
                            <Widget Type="Label"    Caption=""                    X="0" Y="4"   />
                        </Widget>
                        -->
                    </Widget>
                    
                    <Widget   Type="Box"      Caption=""                X="0" Y="1"  Style="Flat" >
                        
                        <Widget   Type="Box"      Caption="Amplitude Control"   X="0" Y="0"  Style="Box" >
                            <Widget Type="Check"  Caption="Loop"            X="0" Y="0"               Address="0xA" Index="0" Align="VCenter" />
                            <Widget Type="Led"    Caption=""                X="1" Y="0"               Address="0xA" Index="0" />
                            
                            <Widget Type="Edit"   Caption="Threshold [V]"   X="0" Y="1" Action="Set"  Address="0xA" Index="0" Display="Float" Scale="3276.6" Min="0" Max="2.5"/>
                            <Widget Type="Check"  Caption="Active"          X="1" Y="1"               Address="0xA" Index="0" />
                           
                            <Widget Type="Edit"   Caption="A exc. [V]"          X="0" Y="2" Action="Set"  Address="0xC0" Index="0" Display="Float" Scale="3276.6" Min="0" Max="5" />
                            <Widget Type="Edit"   Caption="A osc. Setpoint [V]" X="0" Y="2" Address="0xF4"  Index="0" Display="Float" Scale="10000." />
                            
                            <Widget Type="Edit"   Caption="P"                   X="0" Y="3" Action="Set"  Address="0xA"  Index="0" Min="0" Max="65535"/>
                            <Widget Type="Edit"   Caption="I"                   X="1" Y="3" Action="Set"  Address="0xA"  Index="0" Min="0" Max="65535"/>
                        </Widget>
                        
                        <Widget   Type="Box"      Caption="Frequency Control"   X="1" Y="0"  Style="Box" >
                            <Widget Type="Check"  Caption="Loop"              X="0" Y="0"               Address="0xA" Index="0" Align="VCenter" />
                            <Widget Type="Led"    Caption=""                  X="1" Y="0"               Address="0xA" Index="0" />
                            
                            <Widget Type="Edit"   Caption="F In [kHz]"         X="0" Y="1" Action="Set"  Address="0xC8" Index="0" Display="Float" Scale="53687.0912" Min="0" Max="1000"/>
                            <Widget Type="Check"  Caption="Virt. Phi Mode"     X="1" Y="1"               Address="0xA" Index="0" />
                            
                            <Widget Type="Edit"   Caption=""                  X="0" Y="1"   Address="0xF5" Index="0" Display="Float" Scale="10000.">
                              <Widget Type="Label"  Caption="&phi; Setpoint [%1]!ms=13:cos=20" Display="Enum" Address="0x1053" Index="0" Alignment="Left" />
                            </Widget>
                            <Widget Type="Check"  Caption="Active"             X="1" Y="2"               Address="0xA" Index="0" />
                            
                            <Widget Type="Edit"   Caption="Window [deg]"       X="0" Y="3" Action="Set"  Address="0xA" Index="0" Display="Float" Scale="107374" Min="-90" Max="90"/>
                            
                            <Widget Type="Edit"   Caption="P"                  X="0" Y="4" Action="Set"  Address="0xA" Index="0" Min="0" Max="65535"/>
                            <Widget Type="Edit"   Caption="I"                  X="1" Y="4" Action="Set"  Address="0xA" Index="0" Min="0" Max="65535"/>
                        </Widget>
                        
                    </Widget>
                </Widget>
                
            </Widget>
            
            <!-- rechts unten -->
            <Widget Type="Box"   Caption=""       Style="Flat"              X="0" Y="1" >
                <Widget Type="Tabs"                           Width="5"    X="4" Y="0" >
                    <Tab Name="Calibration" Margin="5" >
                        <Widget Type="Box"   Caption=""       Style="Flat"    X="1" Y="0" Width="3"   >  
                            <Widget   Type="Box"      Caption=""               X="1" Y="0" Style="Flat" >
                                <Widget Type="Edit"     Caption="F Center [kHz]" X="0" Y="0" Action="Set"  Address="0xD6" Index="0" Display="Float" Scale="53687.0912" Min="1" Max="1000"/>
                                <Widget Type="Edit"     Caption="Span [kHz]"     X="0" Y="1" Action="Set"  Address="0xD7" Index="0" Display="Float" Scale="53687.0912" Min="0.1" Max="100"/>
                                <Widget Type="Edit"     Caption="Count"          X="0" Y="2" Action="Set"  Address="0xDE" Index="0" />
                                <Widget Type="Edit"     Caption="Wait <b></b>[&mu;s]"             X="0" Y="3" Action="Set"  Address="0xDF" Index="0" Display="Float" Scale="40" Min="0.03" Max="1600"/>
                                <Widget Type="Edit"     Caption="Measure Count"  X="0" Y="4" Action="Set"  Address="0xE2" Index="0" Min="0" Max="65535"/>
                                <Widget Type="Led"      Caption="Run"           X="0" Y="5"               Address="0xDA" Index="0" />
                                <Widget Type="Button"   Caption="Start"         X="0" Y="6" Toggle="0"    Address="0xD5" Index="0" />
                            </Widget>
                            
                            <Widget Type="Constant"   Address="49" Index="4" DefVal="12" /> <!-- signal: Amplitude -->
                            <Widget Type="Constant"   Address="50" Index="4" DefVal="1" />  <!-- points: 1 -->
                            <Widget Type="Constant"   Address="51" Index="4" DefVal="0" />  <!-- average: 0 -->
                            <Widget Type="Constant"   Address="48" Index="4" DefVal="2" />  <!-- connect permanent -->
                            
                            <Widget Type="Constant"   Address="49" Index="5" DefVal="13" /> <!-- signal: Phase -->
                            <Widget Type="Constant"   Address="50" Index="5" DefVal="1" />  <!-- points: 1 -->
                            <Widget Type="Constant"   Address="51" Index="5" DefVal="0" />  <!-- average: 0 -->
                            <Widget Type="Constant"   Address="48" Index="5" DefVal="2" />  <!-- connect permanent -->
                            
                            <View Channel="4"    Caption=""                   X="2" Y="0" >
                                <Plugin Type="Line Display"   Caption="Amplitude"  Size="50" />
                            </View>
                            
                            <View Channel="5"    Caption=""                   X="3" Y="0" >
                                <Plugin Type="Line Display"   Caption="Phase"  Size="50" />
                            </View>
                            
                        </Widget>
                    </Tab>
                    
                    
                    <Tab Name="Line View" Margin="10" >
                        <Widget Type="Box"   Caption=""                        X="0" Y="0" Width="2"  Style="Flat" >
                            <Widget Type="Constant"                                                 Address="48" Index="2" DefVal="2" />
                            <Widget Type="Label"   Caption=""                           X="0" Y="0" />
                            <Widget Type="Combo"   Caption="Signal"                     X="0" Y="1" Address="49" Index="2" Choices="ADC1:ADC2:ADC3:ADC4:ADC5:ADC6:Readback AD:Counter1:Counter2:ReadbackZ:ReadbackX:ReadbackY:Slave1=12:Slave2=13:ADC1/Z-OUT=14" DefVal="12" />
                            <Widget Type="Edit"    Caption="Sample Time <b></b>[&mu;s]" X="0" Y="2" Address="50" Index="2" Min="0" Max="65535" DefVal="100" />
                            <Widget Type="Combo"   Caption="Average"                    X="0" Y="3" Address="51" Index="2" Choices="1:2:4:8:16:32:64:128" DefVal="0" />
                            <Widget Type="Label"   Caption=""                           X="0" Y="4" />
                            <Widget Type="Label"   Caption=""                           X="0" Y="5" />
                        </Widget>
                        
                        <View Channel="2"    Caption=""               X="2" Y="0" >
                            <Plugin Type="Line Display"  Size="50" />
                        </View>
                    </Tab>
                    
                    
                    <Tab Name="Amplitude Measurement" Margin="5" >
                        <Widget Type="Box"   Caption=""    Width="1"   Style="Flat"    X="0" Y="0"    >  
                            <Widget Type="Edit"     Caption="Amplitude Min. Level"     X="0" Y="0" Action="Set"  Address="0xE0" Index="0" Min="0" Max="65535"/>
                            <Widget Type="Edit"     Caption="Amplitude Max. Level"     X="0" Y="1" Action="Set"  Address="0xE1" Index="0" Min="0" Max="65535"/>
                            <Widget Type="Edit"     Caption="Amplitude Mode"           X="0" Y="2" Action="Set"  Address="0xEA" Index="0" Min="0" Max="65535"/>
                            <Widget Type="Edit"     Caption="Amplitude 3 WAIT"         X="0" Y="3" Action="Set"  Address="0xEB" Index="0" Min="0" Max="65535"/>
                        </Widget>
                         
                        <Widget Type="Box"   Caption=""    Width="3"   Style="Flat"    X="1" Y="0"    >  
                        </Widget>
                    </Tab>
                    

                   
                </Widget>
            </Widget>
            
        </Widget>
        
    </Widget>
    
    
    


  </Tab>
  
</Experiment>

